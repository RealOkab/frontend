import{r as m,u as w,j as e,a as C}from"./index-Cv4dHjtR.js";import{a as v}from"./index-xsH4HHeE.js";import{B as y,M as k}from"./Modal-DQLdmHsQ.js";function g(l){return new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS",minimumFractionDigits:2,maximumFractionDigits:2}).format(l)}function D({className:l,productName:r,productDescription:o,productPrice:d,productImage:n,productId:i,getCartItems:a,cartItems:c}){const[x,p]=m.useState(!1),b=w(),f=()=>{a({productName:r,productPrice:d,quantity:1,disableButton:!0})},s=()=>{b(`/klinchem/${i}/products_Details`)};return m.useEffect(()=>(c.map(t=>{t.productName.includes(r)&&p(!0)}),()=>c),[c,r]),e.jsxs("div",{className:"shadow shadow-gray-950 flex flex-col justify-center items-center rounded  border bg-gray-50 border-gray-200 mt-2 m-2 w-60 h-96 p-2",children:[e.jsxs("section",{className:"flex flex-col text-center text-gray-950 ",children:[e.jsx("img",{src:"https://res.cloudinary.com/dyepzv7v1/image/upload/"+n,alt:"product_image",className:"h-32 w-32 rounded self-center"}),e.jsx("h2",{className:"text-[1.5em] font-semibold",children:r}),e.jsx("p",{className:"font-Khula font-bold",children:g(d)}),e.jsx("p",{className:"text-[0.8em] font-Khula flex flex-wrap items-center justify-center text-center",children:o})]}),e.jsxs("section",{className:"flex flex-row  ",children:[e.jsx(y,{disabled:x,onClick:f,className:` ${x?"text-blue-400":""} bg-blue-950  text-gray-50 p-1 rounded mr-1 text-[10px] shadow shadow-blue-400`,children:x?"Added to cart":"Add to cart"}),e.jsx(y,{onClick:s,className:"bg-blue-600 text-gray-100 ml-1 p-1 rounded text-[10px] shadow shadow-blue-950",children:"Details"})]})]})}function P({cartItems:l,modalStatus:r,handleModalStatus2:o,sendData:d}){const[n,i]=m.useState(r),[a,c]=m.useState([]),x=w(),p=()=>{o(!1)},b=()=>{o(!1),x("/klinchem/checkout",{state:a})},f=(s,t)=>{a&&a.map(u=>{s==="+"&&u.productName===t&&(u.quantity+=1,c(()=>[...a]));const j=h=>{d(h)};if(s==="-"&&u.productName===t&&(u.quantity-=1,c(()=>[...a])),s==="-"&&u.productName===t&&u.quantity===0){const h=a.filter(N=>N.quantity!==0);j([...h]),c(()=>[...h])}})};return m.useEffect(()=>{c(l),i(r)},[r,l]),e.jsx(e.Fragment,{children:e.jsx(k,{open:n,className:" bg-opacity-30 z-50  flex justify-center items-center rounded",children:e.jsxs("div",{className:`flex justify-center items-center  rounded 
         h-[50vh] w-[80vw] `,children:[e.jsxs("div",{className:"flex flex-col w-[20vw] self-start h-[50vh]  rounded",children:[e.jsx("h3",{className:" font-semibold text-blue-500 text-[1.5em] ml-4 ",children:"Cart Items"}),e.jsx("section",{className:" w-[80vw] flex flex-col text-start justify-start items-start",children:l.length>0&&a.map((s,t)=>e.jsxs("p",{className:" pl-4 w-full mt-2 self-center text-[1.5em] text-left mr-2  ml-4 flex justify-start items-center flex-wrap",children:[t+1+". "," ",s.productName," -",g(s.productPrice)," ",e.jsx("span",{className:"mr-1",children:"x"}),e.jsx("span",{className:" text-blue-500 font-semibold mr-1",children:s.quantity}),e.jsx("button",{onClick:()=>f("+",s.productName),className:" bg-blue-600 shadow shadow-gray-950  text-[.5em] hover:text-[.555em] bg-black  text-gray-50 rounded p-1  mr-1 flex justify-center items-center self-center ",children:"Add"}),e.jsx("button",{onClick:()=>f("-",s.productName),className:" text-[.5em] shadow shadow-blue-600 hover:text-[.555em] bg-black shadow-red-600 text-gray-50 rounded p-1 mr-1 flex justify-center items-center ",children:"Reduce"})," "]},s.productName))})]}),e.jsx("section",{className:"w-full h-h-full flex flex-row justify-end items-end self-end mb-4 mr-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:["Total - GHC ",a.reduce((s,t)=>s+t.quantity*+t.productPrice,0)]}),e.jsxs("div",{children:[e.jsx("button",{className:" bg-red-700 text-gray-50 p-1 m-1 rounded shadow shadow-black",onClick:p,children:"Cancel"}),e.jsx("button",{className:" bg-blue-700 text-gray-50 p-1 m-1 rounded shadow shadow-black",onClick:b,children:"Checkout"})]})]})})]})})})}function E({message:l,className:r,...o}){const[d,n]=m.useState(!1),i=()=>{n(!0)};return C.createPortal(e.jsxs("div",{className:r+` flex  flex-row w-[50%] p-2 z-50  rounded ${d&&"hidden invisible"}  `,children:[e.jsx("p",{className:"w-[80%] justify-center items-center self-center",children:l}),e.jsx("div",{className:"w-[20%] flex justify-end",children:e.jsx("button",{...o,className:" flex justify-end items-end self-end  border border-double  p-1 rounded font-bold",onClick:i,children:"X"})})]}),document.getElementById("flashCards-modal"))}function A({getCartItems:l,cartItems:r,modalStatus:o,handleModalState2:d,flashCardStatus:n,nullifyFlashCardStataus:i,handleCartData:a}){const[c,x]=m.useState([]),p="http://localhost:3000/klinchem/products";m.useEffect(()=>{const t=async()=>{await v.get(p).then(j=>{x(h=>[...h,j.data])}).catch(j=>{console.error(j)})};let u=setTimeout(()=>(i(""),()=>{clearTimeout(u)}),5e3);return t},[i]);const b=t=>{l(t)},f=t=>{d(t)},s=t=>{a(t)};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:" animate-fly-in duration-500 flex flex-row flex-wrap justify-center items-center animate-flyin animate-flyin-duration-500  animate-flyin-delay-500 w-[100%]",children:[e.jsx(P,{cartItems:r,modalStatus:o,handleModalStatus2:f,sendData:s}),c[0]&&c[0].map(t=>e.jsx(D,{productName:t.productName,productDescription:t.productDescription,productPrice:t.productPrice,productImage:t.productImage,getCartItems:b,cartItems:r,productId:t._id},t.productName))]}),e.jsx("div",{className:" flex justify-center items-center  bg-blue-500 text-gray-50  animate-flyin ",children:e.jsx(E,{className:` text-gray-50 flex flex-row z-50 shadow shadow-black ${n==="Created"&&"bg-blue-500   "}  ${n==="error"&&"bg-red-500   "} ${n===""&&"hidden"} `,message:n==="Created"&&"Product successfully created!"||n==="error"&&"Error Failed to create Produc! Try again"})})]})}export{A as default};
