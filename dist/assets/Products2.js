import{d as e,u as t,w as s,L as a}from"./index.js";import{o as r}from"./index22.js";import{n as c,r as l}from"./Modal2.js";import"./preload-helper.js";function d(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function n({className:a,productName:r,productDescription:c,productPrice:n,productImage:o,productId:i,getCartItems:m,cartItems:u}){const[x,f]=e.useState(!1),h=s();return e.useEffect((()=>(u.map((e=>{e.productName.includes(r)&&f(!0)})),()=>u)),[u,r]),t.jsxs("div",{className:"shadow shadow-gray-950 flex flex-col justify-center items-center rounded  border bg-gray-50 border-gray-200 mt-2 m-2 w-60 h-96 p-2",children:[t.jsxs("section",{className:"flex flex-col text-center text-gray-950 ",children:[t.jsx("img",{src:"https://res.cloudinary.com/dyepzv7v1/image/upload/"+o,alt:"product_image",className:"h-32 w-32 rounded self-center"}),t.jsx("h2",{className:"text-[1.5em] font-semibold",children:r}),t.jsx("p",{className:"font-Khula font-bold",children:d(n)}),t.jsx("p",{className:"text-[0.8em] font-Khula flex flex-wrap items-center justify-center text-center",children:c})]}),t.jsxs("section",{className:"flex flex-row  ",children:[t.jsx(l,{disabled:x,onClick:()=>{m({productName:r,productPrice:n,quantity:1,disableButton:!0})},className:` ${x?"text-blue-400":""} bg-blue-950  text-gray-50 p-1 rounded mr-1 text-[10px] shadow shadow-blue-400`,children:x?"Added to cart":"Add to cart"}),t.jsx(l,{onClick:()=>{h(`/klinchem/${i}/products_Details`)},className:"bg-blue-600 text-gray-100 ml-1 p-1 rounded text-[10px] shadow shadow-blue-950",children:"Details"})]})]})}function o({cartItems:a,modalStatus:r,handleModalStatus2:l,sendData:n}){const[o,i]=e.useState(r),[m,u]=e.useState([]),x=s(),f=(e,t)=>{m&&m.map((s=>{if("+"===e&&s.productName===t&&(s.quantity+=1,u((()=>[...m]))),"-"===e&&s.productName===t&&(s.quantity-=1,u((()=>[...m]))),"-"===e&&s.productName===t&&0===s.quantity){const e=m.filter((e=>0!==e.quantity));a=[...e],n(a),u((()=>[...e]))}var a}))};return e.useEffect((()=>{u(a),i(r)}),[r,a]),t.jsx(t.Fragment,{children:t.jsx(c,{open:o,className:" bg-opacity-30 z-50  flex justify-center items-center rounded",children:t.jsxs("div",{className:"flex justify-center items-center  rounded \n         h-[50vh] w-[80vw] ",children:[t.jsxs("div",{className:"flex flex-col w-[20vw] self-start h-[50vh]  rounded",children:[t.jsx("h3",{className:" font-semibold text-blue-500 text-[1.5em] ml-4 ",children:"Cart Items"}),t.jsx("section",{className:" w-[80vw] flex flex-col text-start justify-start items-start",children:a.length>0&&m.map(((e,s)=>t.jsxs("p",{className:" pl-4 w-full mt-2 self-center text-[1.5em] text-left mr-2  ml-4 flex justify-start items-center flex-wrap",children:[s+1+". "," ",e.productName," -",d(e.productPrice)," ",t.jsx("span",{className:"mr-1",children:"x"}),t.jsx("span",{className:" text-blue-500 font-semibold mr-1",children:e.quantity}),t.jsx("button",{onClick:()=>f("+",e.productName),className:" bg-blue-600 shadow shadow-gray-950  text-[.5em] hover:text-[.555em] bg-black  text-gray-50 rounded p-1  mr-1 flex justify-center items-center self-center ",children:"Add"}),t.jsx("button",{onClick:()=>f("-",e.productName),className:" text-[.5em] shadow shadow-blue-600 hover:text-[.555em] bg-black shadow-red-600 text-gray-50 rounded p-1 mr-1 flex justify-center items-center ",children:"Reduce"})," "]},e.productName)))})]}),t.jsx("section",{className:"w-full h-h-full flex flex-row justify-end items-end self-end mb-4 mr-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("p",{children:["Total - GHC ",m.reduce(((e,t)=>e+t.quantity*+t.productPrice),0)]}),t.jsxs("div",{children:[t.jsx("button",{className:" bg-red-700 text-gray-50 p-1 m-1 rounded shadow shadow-black",onClick:()=>{l(!1)},children:"Cancel"}),t.jsx("button",{className:" bg-blue-700 text-gray-50 p-1 m-1 rounded shadow shadow-black",onClick:()=>{l(!1),x("/klinchem/checkout",{state:m})},children:"Checkout"})]})]})})]})})})}function i({message:s,className:r,...c}){const[l,d]=e.useState(!1);return a.createPortal(t.jsxs("div",{className:r+` flex  flex-row w-[50%] p-2 z-50  rounded ${l&&"hidden invisible"}  `,children:[t.jsx("p",{className:"w-[80%] justify-center items-center self-center",children:s}),t.jsx("div",{className:"w-[20%] flex justify-end",children:t.jsx("button",{...c,className:" flex justify-end items-end self-end  border border-double  p-1 rounded font-bold",onClick:()=>{d(!0)},children:"X"})})]}),document.getElementById("flashCards-modal"))}function m({getCartItems:s,cartItems:a,modalStatus:c,handleModalState2:l,flashCardStatus:d,nullifyFlashCardStataus:m,handleCartData:u}){const[x,f]=e.useState([]);e.useEffect((()=>{let e=setTimeout((()=>(m(""),()=>{clearTimeout(e)})),5e3);return async()=>{await r.get("http://localhost:3000/klinchem/products").then((e=>{f((t=>[...t,e.data]))})).catch((e=>{console.error(e)}))}}),[m]);const h=e=>{s(e)};return t.jsxs(t.Fragment,{children:[t.jsxs("section",{className:" animate-fly-in duration-500 flex flex-row flex-wrap justify-center items-center animate-flyin animate-flyin-duration-500  animate-flyin-delay-500 w-[100%]",children:[t.jsx(o,{cartItems:a,modalStatus:c,handleModalStatus2:e=>{l(e)},sendData:e=>{u(e)}}),x[0]&&x[0].map((e=>t.jsx(n,{productName:e.productName,productDescription:e.productDescription,productPrice:e.productPrice,productImage:e.productImage,getCartItems:h,cartItems:a,productId:e._id},e.productName)))]}),t.jsx("div",{className:" flex justify-center items-center  bg-blue-500 text-gray-50  animate-flyin ",children:t.jsx(i,{className:` text-gray-50 flex flex-row z-50 shadow shadow-black ${"Created"===d&&"bg-blue-500   "}  ${"error"===d&&"bg-red-500   "} ${""===d&&"hidden"} `,message:"Created"===d?"Product successfully created!":"error"===d&&"Error Failed to create Produc! Try again"})})]})}export{m as default};
