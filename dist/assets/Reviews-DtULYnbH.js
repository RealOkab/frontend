import{u as b,r as l,j as e}from"./index-aO5FndUg.js";import{a as d}from"./index-xsH4HHeE.js";import{R as g}from"./RatingReview-Bmaw1XMW.js";import{M as N,B as m}from"./Modal-Bgu2cSv4.js";function v({reviewer:i,email:a,comment:t,rate:n,product:x,commentDate:h,_id:c}){const o=b(),[u,r]=l.useState({initialConfirmation:!1}),f=()=>{o(`/klinchem/ProductReviews/${c}/update`)},p=()=>{r(s=>({...s,initialConfirmation:!0}))},j=()=>{r(s=>({...s,initialConfirmation:!1}))},w=async()=>{await d.delete(`http://localhost:3000/klinchem/deleteRreview/${c}/delete`).then(()=>{o("/klinchem/products_reviews/success")}).catch(s=>{throw new Error(s)})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col mt-4 mb-4 w-[70%]",children:[u.initialConfirmation&&e.jsx(N,{open:!0,className:" bg-opacity-30 z-50  flex justify-center items-center rounded  ",children:e.jsxs("div",{className:`flex justify-center items-center  rounded 
         h-[20vh] w-[80vw] `,children:[e.jsx("div",{className:"flex flex-col w-[100%] self-start  rounded",children:e.jsxs("h3",{className:" font-semibold text-blue-500 text-[1.5em] ml-4 ",children:["Deletion",e.jsx("p",{className:"font-Khula font-light text-[0.5em] text-black",children:"Do you want to proceed? This action cannnot be undone"})]})}),e.jsxs("section",{className:"flex flex-row  w-[100%] self-end ",children:[e.jsx(m,{className:"bg-red-500 rounded text-gray-50 ml-1 mr-1 p-2 mb-4 ",type:"button",onClick:w,children:"Confirm"}),e.jsx(m,{className:"bg-blue-600 rounded text-gray-50  ml-1 mr-1  p-2  mb-4 ",type:"button",onClick:j,children:"Cancel"})]})]})}),e.jsx("h2",{className:"font-extralight text-[12px] underline",children:h}),e.jsxs("h2",{className:"font-semibold",children:[i," ",e.jsx("span",{className:"text-[12px] font-thin",children:" reviewing -"}),e.jsxs("span",{className:"text-blue-700 text-[12px]",children:[" ",x]})]}),e.jsx(g,{rating:n,textSize:"text-[15px]"}),e.jsx("h3",{className:"text-[15px] text-gray-500 font-light",children:a}),e.jsx("h4",{children:t})]}),e.jsxs("div",{children:[e.jsx("button",{className:"bg-blue-600 text-white p-1 rounded text-[.8em] mr-1 ",onClick:f,children:"Update"}),e.jsx("button",{className:"bg-red-600 text-white p-1 rounded text-[.8em] ml-1",onClick:p,children:"Delete"})]})]})}function D(){const[i,a]=l.useState([]);return l.useEffect(()=>{(async()=>{await d.get("http://localhost:3000/klinchem/ProductReviews").then(n=>{a(n.data)}).catch(n=>{throw new Error(n)})})()},[]),e.jsx("div",{className:"animate-fly-in duration-500 text-black flex items-center justify-center mt-6",children:e.jsxs("section",{className:"w-[80%]",children:[e.jsx("h1",{className:"text-blue-700 text-[2em]",children:"All Reviews"}),i.length>0&&i.map(t=>e.jsx(v,{commentDate:t.commentDate.slice(0,10),product:t.productReviewed,reviewer:t.reviewer,email:t.email,comment:t.comment,rate:t.rate,_id:t._id},t._id))]})})}export{D as default};
