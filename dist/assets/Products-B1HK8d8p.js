import{r as e,u as t,j as s,a}from"./index-B32FC9CB.js";import{a as r}from"./index-BTvahscA.js";import{B as c,M as l}from"./Modal-C4GUBBge.js";function d(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function n({className:a,productName:r,productDescription:l,productPrice:n,productImage:o,productId:i,getCartItems:m,cartItems:u}){const[x,f]=e.useState(!1),h=t();return e.useEffect((()=>(u.map((e=>{e.productName.includes(r)&&f(!0)})),()=>u)),[u,r]),s.jsxs("div",{className:"shadow shadow-gray-950 flex flex-col justify-center items-center rounded  border bg-gray-50 border-gray-200 mt-2 m-2 w-60 h-96 p-2",children:[s.jsxs("section",{className:"flex flex-col text-center text-gray-950 ",children:[s.jsx("img",{src:"https://res.cloudinary.com/dyepzv7v1/image/upload/"+o,alt:"product_image",className:"h-32 w-32 rounded self-center"}),s.jsx("h2",{className:"text-[1.5em] font-semibold",children:r}),s.jsx("p",{className:"font-Khula font-bold",children:d(n)}),s.jsx("p",{className:"text-[0.8em] font-Khula flex flex-wrap items-center justify-center text-center",children:l})]}),s.jsxs("section",{className:"flex flex-row  ",children:[s.jsx(c,{disabled:x,onClick:()=>{m({productName:r,productPrice:n,quantity:1,disableButton:!0})},className:` ${x?"text-blue-400":""} bg-blue-950  text-gray-50 p-1 rounded mr-1 text-[10px] shadow shadow-blue-400`,children:x?"Added to cart":"Add to cart"}),s.jsx(c,{onClick:()=>{h(`/klinchem/${i}/products_Details`)},className:"bg-blue-600 text-gray-100 ml-1 p-1 rounded text-[10px] shadow shadow-blue-950",children:"Details"})]})]})}function o({cartItems:a,modalStatus:r,handleModalStatus2:c,sendData:n}){const[o,i]=e.useState(r),[m,u]=e.useState([]),x=t(),f=(e,t)=>{m&&m.map((s=>{"+"===e&&s.productName===t&&(s.quantity+=1,u((()=>[...m])));if("-"===e&&s.productName===t&&(s.quantity-=1,u((()=>[...m]))),"-"===e&&s.productName===t&&0===s.quantity){const e=m.filter((e=>0!==e.quantity));a=[...e],n(a),u((()=>[...e]))}var a}))};return e.useEffect((()=>{u(a),i(r)}),[r,a]),s.jsx(s.Fragment,{children:s.jsx(l,{open:o,className:" bg-opacity-30 z-50  flex justify-center items-center rounded",children:s.jsxs("div",{className:"flex justify-center items-center  rounded \n         h-[50vh] w-[80vw] ",children:[s.jsxs("div",{className:"flex flex-col w-[20vw] self-start h-[50vh]  rounded",children:[s.jsx("h3",{className:" font-semibold text-blue-500 text-[1.5em] ml-4 ",children:"Cart Items"}),s.jsx("section",{className:" w-[80vw] flex flex-col text-start justify-start items-start",children:a.length>0&&m.map(((e,t)=>s.jsxs("p",{className:" pl-4 w-full mt-2 self-center text-[1.5em] text-left mr-2  ml-4 flex justify-start items-center flex-wrap",children:[t+1+". "," ",e.productName," -",d(e.productPrice)," ",s.jsx("span",{className:"mr-1",children:"x"}),s.jsx("span",{className:" text-blue-500 font-semibold mr-1",children:e.quantity}),s.jsx("button",{onClick:()=>f("+",e.productName),className:" bg-blue-600 shadow shadow-gray-950  text-[.5em] hover:text-[.555em] bg-black  text-gray-50 rounded p-1  mr-1 flex justify-center items-center self-center ",children:"Add"}),s.jsx("button",{onClick:()=>f("-",e.productName),className:" text-[.5em] shadow shadow-blue-600 hover:text-[.555em] bg-black shadow-red-600 text-gray-50 rounded p-1 mr-1 flex justify-center items-center ",children:"Reduce"})," "]},e.productName)))})]}),s.jsx("section",{className:"w-full h-h-full flex flex-row justify-end items-end self-end mb-4 mr-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("p",{children:["Total - GHC ",m.reduce(((e,t)=>e+t.quantity*+t.productPrice),0)]}),s.jsxs("div",{children:[s.jsx("button",{className:" bg-red-700 text-gray-50 p-1 m-1 rounded shadow shadow-black",onClick:()=>{c(!1)},children:"Cancel"}),s.jsx("button",{className:" bg-blue-700 text-gray-50 p-1 m-1 rounded shadow shadow-black",onClick:()=>{c(!1),x("/klinchem/checkout",{state:m})},children:"Checkout"})]})]})})]})})})}function i({message:t,className:r,...c}){const[l,d]=e.useState(!1);return a.createPortal(s.jsxs("div",{className:r+` flex  flex-row w-[50%] p-2 z-50  rounded ${l&&"hidden invisible"}  `,children:[s.jsx("p",{className:"w-[80%] justify-center items-center self-center",children:t}),s.jsx("div",{className:"w-[20%] flex justify-end",children:s.jsx("button",{...c,className:" flex justify-end items-end self-end  border border-double  p-1 rounded font-bold",onClick:()=>{d(!0)},children:"X"})})]}),document.getElementById("flashCards-modal"))}function m({getCartItems:t,cartItems:a,modalStatus:c,handleModalState2:l,flashCardStatus:d,nullifyFlashCardStataus:m,handleCartData:u}){const[x,f]=e.useState([]);e.useEffect((()=>{let e=setTimeout((()=>(m(""),()=>{clearTimeout(e)})),5e3);return async()=>{await r.get("http://localhost:3000/klinchem/products").then((e=>{f((t=>[...t,e.data]))})).catch((e=>{console.error(e)}))}}),[m]);const h=e=>{t(e)};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:" animate-fly-in duration-500 flex flex-row flex-wrap justify-center items-center animate-flyin animate-flyin-duration-500  animate-flyin-delay-500 w-[100%]",children:[s.jsx(o,{cartItems:a,modalStatus:c,handleModalStatus2:e=>{l(e)},sendData:e=>{u(e)}}),x[0]&&x[0].map((e=>s.jsx(n,{productName:e.productName,productDescription:e.productDescription,productPrice:e.productPrice,productImage:e.productImage,getCartItems:h,cartItems:a,productId:e._id},e.productName)))]}),s.jsx("div",{className:" flex justify-center items-center  bg-blue-500 text-gray-50  animate-flyin ",children:s.jsx(i,{className:` text-gray-50 flex flex-row z-50 shadow shadow-black ${"Created"===d&&"bg-blue-500   "}  ${"error"===d&&"bg-red-500   "} ${""===d&&"hidden"} `,message:"Created"===d?"Product successfully created!":"error"===d&&"Error Failed to create Produc! Try again"})})]})}export{m as default};
